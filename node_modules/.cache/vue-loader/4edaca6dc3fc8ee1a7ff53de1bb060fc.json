{"remainingRequest":"/Users/trinhnguyen/Desktop/popcorn-project/popcorn-app-final/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/trinhnguyen/Desktop/popcorn-project/popcorn-app-final/src/components/Movie.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/trinhnguyen/Desktop/popcorn-project/popcorn-app-final/src/components/Movie.vue","mtime":1576540018720},{"path":"/Users/trinhnguyen/Desktop/popcorn-project/popcorn-app-final/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/trinhnguyen/Desktop/popcorn-project/popcorn-app-final/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/trinhnguyen/Desktop/popcorn-project/popcorn-app-final/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/trinhnguyen/Desktop/popcorn-project/popcorn-app-final/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb3ZpZUFwaSBmcm9tICdAL01vdmllQXBpJzsKaW1wb3J0IHsgZGIgfSBmcm9tICdAL2ZpcmViYXNlJzsKaW1wb3J0ICdmaXJlYmFzZS9maXJlc3RvcmUnOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UvYXBwJzsKCnZhciBNb3ZpZUxpc3QgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgICAgbW92aWU6IG51bGwsCiAgICAgICAgZGF0ZXRpbWU6IG5ldyBEYXRlKCksCiAgICAgICAgb3duZXI6ICcnLAogICAgICAgIG1vdmllSWQ6ICcnCiAgICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgewogICAgcHJvcHM6IFsnaWQnXSwKCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHVzZXI6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlciwKICAgICAgICAgICAgc2luZ2xlTW92aWU6ICcnLAogICAgICAgICAgICBtb3ZpZUdlbnJlczogW10sCiAgICAgICAgICAgIGdvdHRhV2F0Y2hMaXN0OiBbXSwKICAgICAgICAgICAgd2F0Y2hlZExpc3Q6IFtdLAogICAgICAgICAgICBkaWFsb2c6IGZhbHNlLAogICAgICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgICAgICByYXRpbmdzOiAnJwogICAgICAgIH07CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICBtb3ZpZUFwaQogICAgICAgICAgICAuZmV0Y2hTaW5nbGVNb3ZpZSh0aGlzLmlkKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZU1vdmllID0gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICB0aGlzLnJhdGluZ3MgPSB0aGlzLnNpbmdsZU1vdmllLnZvdGVfYXZlcmFnZTsKICAgICAgICAgICAgICAgIHRoaXMubW92aWVHZW5yZXMgPSB0aGlzLnNpbmdsZU1vdmllLmdlbnJlczsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5mZXRjaEdvdHRhV2F0Y2hMaXN0KCk7CiAgICAgICAgICAgICAgICB0aGlzLmZldGNoV2F0Y2hlZExpc3QoKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBSkFYIFFVRVJZIEVSUk9SJywgZXJyb3IpOwogICAgICAgICAgICB9KTsKICAgIH0sCgogICAgY29tcHV0ZWQ6IHsKICAgICAgICBsb2dnZWRJbigpIHsKICAgICAgICAgICAgcmV0dXJuIGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlciAhPSBudWxsOwogICAgICAgIH0sCiAgICAgICAgbG9nZ2VkSW5MaXN0T3duZXIoKSB7CiAgICAgICAgICAgIGlmIChmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdvdHRhV2F0Y2hMaXN0LmZpbmQoZnVuY3Rpb24obGlzdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0Lm93bmVyID09PSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudWlkOwogICAgICAgICAgICAgICAgfSwgZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9LAogICAgICAgIGlzTGlzdE93bmVyKCkgewogICAgICAgICAgICBpZiAodGhpcy5sb2dnZWRJbkxpc3RPd25lcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9LAogICAgICAgIGdvdHRhV2F0Y2hlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ290dGFXYXRjaExpc3Quc29tZSgKICAgICAgICAgICAgICAgIG1vdmllID0+IG1vdmllLm1vdmllSWQgPT09IHRoaXMuc2luZ2xlTW92aWUuaWQKICAgICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIHdhdGNoZWQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLndhdGNoZWRMaXN0LnNvbWUoCiAgICAgICAgICAgICAgICBtb3ZpZSA9PiBtb3ZpZS5tb3ZpZUlkID09PSB0aGlzLnNpbmdsZU1vdmllLmlkCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgYmFjaygpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgICB9LAoKICAgICAgICBhc3luYyBmZXRjaEdvdHRhV2F0Y2hMaXN0KCkgewogICAgICAgICAgICB0aGlzLmdvdHRhV2F0Y2hMaXN0ID0gW107CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICAgICB0aGlzLmdvdHRhV2F0Y2hMaXN0LnNvbWUoCiAgICAgICAgICAgICAgICAgICAgbW92aWUgPT4gbW92aWUubW92aWUuaWQgPT09IHRoaXMuc2luZ2xlTW92aWUuaWQKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5nb3R0YVdhdGNoTGlzdCk7CiAgICAgICAgICAgIC8vIGxvYWQgbGlzdCBmcm9tIGRhdGFiYXNlIHRvIGxvY2FsCiAgICAgICAgICAgIGF3YWl0IGRiCiAgICAgICAgICAgICAgICAuY29sbGVjdGlvbigncG9wY29yblVzZXJzJykKICAgICAgICAgICAgICAgIC5kb2ModGhpcy51c2VyLnVpZCkKICAgICAgICAgICAgICAgIC5jb2xsZWN0aW9uKCdnb3R0YVdhdGNoTGlzdCcpCiAgICAgICAgICAgICAgICAub3JkZXJCeSgnZGF0ZXRpbWUnKQogICAgICAgICAgICAgICAgLmdldCgpCiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihxdWVyeVNuYXBzaG90KSB7CiAgICAgICAgICAgICAgICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uKGRvYykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmdvdHRhV2F0Y2hMaXN0LnB1c2goZG9jLmRhdGEoKSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZ2V0dGluZyBkb2N1bWVudHM6ICcsIGVycm9yKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgICAgIHNlbGYuZ290dGFXYXRjaExpc3Quc29tZSgKICAgICAgICAgICAgICAgICAgICBtb3ZpZSA9PiBtb3ZpZS5tb3ZpZS5pZCA9PT0gdGhpcy5zaW5nbGVNb3ZpZS5pZAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmdvdHRhV2F0Y2hMaXN0KTsKICAgICAgICB9LAoKICAgICAgICBhc3luYyBmZXRjaFdhdGNoZWRMaXN0KCkgewogICAgICAgICAgICB0aGlzLndhdGNoZWRMaXN0ID0gW107CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgLy8gbG9hZCBsaXN0IGZyb20gZGF0YWJhc2UgdG8gbG9jYWwKICAgICAgICAgICAgYXdhaXQgZGIKICAgICAgICAgICAgICAgIC5jb2xsZWN0aW9uKCdwb3Bjb3JuVXNlcnMnKQogICAgICAgICAgICAgICAgLmRvYyh0aGlzLnVzZXIudWlkKQogICAgICAgICAgICAgICAgLmNvbGxlY3Rpb24oJ3dhdGNoZWRMaXN0JykKICAgICAgICAgICAgICAgIC5vcmRlckJ5KCdkYXRldGltZScpCiAgICAgICAgICAgICAgICAuZ2V0KCkKICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHF1ZXJ5U25hcHNob3QpIHsKICAgICAgICAgICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oZG9jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYud2F0Y2hlZExpc3QucHVzaChkb2MuZGF0YSgpKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBnZXR0aW5nIGRvY3VtZW50czogJywgZXJyb3IpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hlZExpc3Quc29tZSgKICAgICAgICAgICAgICAgICAgICBtb3ZpZSA9PiBtb3ZpZS5tb3ZpZS5pZCA9PT0gdGhpcy5zaW5nbGVNb3ZpZS5pZAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLndhdGNoZWRMaXN0KTsKICAgICAgICB9LAoKICAgICAgICBiYWNrVG9Qb3B1bGFyKCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3BvcHVsYXInKTsKICAgICAgICB9LAoKICAgICAgICBhZGRUb0dvdHRhV2F0Y2hMaXN0KCkgewogICAgICAgICAgICBpZiAoIXRoaXMuZ290dGFXYXRjaGVkKSB7CiAgICAgICAgICAgICAgICBsZXQgZ290dGFXYXRjaCA9IG5ldyBNb3ZpZUxpc3QoKTsKICAgICAgICAgICAgICAgIGdvdHRhV2F0Y2gubW92aWUgPSB0aGlzLnNpbmdsZU1vdmllOwogICAgICAgICAgICAgICAgZ290dGFXYXRjaC5vd25lciA9IHRoaXMudXNlci51aWQ7CiAgICAgICAgICAgICAgICBnb3R0YVdhdGNoLm1vdmllSWQgPSB0aGlzLnNpbmdsZU1vdmllLmlkOwogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAgICAgLy8gYWRkIHRvIHN1YiBjb2xsZWN0aW9uCiAgICAgICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCdwb3Bjb3JuVXNlcnMnKQogICAgICAgICAgICAgICAgICAgIC5kb2ModGhpcy51c2VyLnVpZCkKICAgICAgICAgICAgICAgICAgICAuY29sbGVjdGlvbignZ290dGFXYXRjaExpc3QnKQogICAgICAgICAgICAgICAgICAgIC5hZGQoZ290dGFXYXRjaCkKICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0FkZGVkIHRvIEdvdHRhIFdhdGNoJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYmFja1RvUG9wdWxhcigpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0ZhaWxlZCB0byBhZGQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGFkZCBtb3ZpZScsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyBhZGQgdG8gdGhlIGFycmF5CiAgICAgICAgICAgICAgICB0aGlzLmdvdHRhV2F0Y2hMaXN0LnB1c2godGhpcy5zaW5nbGVNb3ZpZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICByZW1vdmVHb3R0YVdhdGNoKCkgewogICAgICAgICAgICBpZiAodGhpcy5pc0xpc3RPd25lcikgewogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2luZ2xlTW92aWUuaWQpOwogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAgICAgdmFyIGRlbGV0ZXF1ZXJ5ID0gZGIKICAgICAgICAgICAgICAgICAgICAuY29sbGVjdGlvbigncG9wY29yblVzZXJzJykKICAgICAgICAgICAgICAgICAgICAuZG9jKHRoaXMudXNlci51aWQpCiAgICAgICAgICAgICAgICAgICAgLmNvbGxlY3Rpb24oJ2dvdHRhV2F0Y2hMaXN0JykKICAgICAgICAgICAgICAgICAgICAud2hlcmUoJ21vdmllSWQnLCAnPT0nLCB0aGlzLnNpbmdsZU1vdmllLmlkKTsKICAgICAgICAgICAgICAgIGRlbGV0ZXF1ZXJ5CiAgICAgICAgICAgICAgICAgICAgLmdldCgpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocXVlcnlTbmFwc2hvdCkgewogICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oZG9jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MucmVmLmRlbGV0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1VuR290dGFXYXRjaGVkIScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5iYWNrVG9Qb3B1bGFyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZFBvaW50cyhzZWxmLnVzZXIudWlkLCA1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGVsZXRlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIFVuR290dGFXYXRjaGVkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZDogJywgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgYWRkVG9XYXRjaGVkTGlzdCgpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLndhdGNoZWQpIHsKICAgICAgICAgICAgICAgIGxldCB3YXRjaGVkID0gbmV3IE1vdmllTGlzdCgpOwogICAgICAgICAgICAgICAgd2F0Y2hlZC5tb3ZpZSA9IHRoaXMuc2luZ2xlTW92aWU7CiAgICAgICAgICAgICAgICB3YXRjaGVkLm93bmVyID0gdGhpcy51c2VyLnVpZDsKICAgICAgICAgICAgICAgIHdhdGNoZWQubW92aWVJZCA9IHRoaXMuc2luZ2xlTW92aWUuaWQ7CiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgICAgICAvLyBhZGQgdG8gc3ViIGNvbGxlY3Rpb24KICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ3BvcGNvcm5Vc2VycycpCiAgICAgICAgICAgICAgICAgICAgLmRvYyh0aGlzLnVzZXIudWlkKQogICAgICAgICAgICAgICAgICAgIC5jb2xsZWN0aW9uKCd3YXRjaGVkTGlzdCcpCiAgICAgICAgICAgICAgICAgICAgLmFkZCh3YXRjaGVkKQogICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnQWRkZWQgdG8gV2F0Y2hlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJhY2tUb1BvcHVsYXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRQb2ludHMoc2VsZi51c2VyLnVpZCwgMTApOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0ZhaWxlZCB0byBhZGQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGFkZCBtb3ZpZScsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyBhZGQgdG8gdGhlIGFycmF5CiAgICAgICAgICAgICAgICB0aGlzLndhdGNoZWRMaXN0LnB1c2godGhpcy5zaW5nbGVNb3ZpZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICByZW1vdmVXYXRjaGVkKCkgewogICAgICAgICAgICBpZiAodGhpcy5pc0xpc3RPd25lcikgewogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2luZ2xlTW92aWUuaWQpOwogICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAgICAgdmFyIGRlbGV0ZXF1ZXJ5ID0gZGIKICAgICAgICAgICAgICAgICAgICAuY29sbGVjdGlvbigncG9wY29yblVzZXJzJykKICAgICAgICAgICAgICAgICAgICAuZG9jKHRoaXMudXNlci51aWQpCiAgICAgICAgICAgICAgICAgICAgLmNvbGxlY3Rpb24oJ3dhdGNoZWRMaXN0JykKICAgICAgICAgICAgICAgICAgICAud2hlcmUoJ21vdmllSWQnLCAnPT0nLCB0aGlzLnNpbmdsZU1vdmllLmlkKTsKICAgICAgICAgICAgICAgIGRlbGV0ZXF1ZXJ5CiAgICAgICAgICAgICAgICAgICAgLmdldCgpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocXVlcnlTbmFwc2hvdCkgewogICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oZG9jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MucmVmLmRlbGV0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1VuV2F0Y2hlZCEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYmFja1RvUG9wdWxhcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEZWxldGVkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdGYWlsZWQgdG8gVW5XYXRjaGVkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZDogJywgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgYWRkUG9pbnRzKHVzZXJJZCwgcG9pbnQpIHsKICAgICAgICAgICAgZGIucnVuVHJhbnNhY3Rpb24oZnVuY3Rpb24odHJhbnNhY3Rpb24pIHsKICAgICAgICAgICAgICAgIGxldCBkb2NSZWYgPSBkYi5jb2xsZWN0aW9uKCdwb3Bjb3JuQm9hcmQnKS5kb2ModXNlcklkKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb24KICAgICAgICAgICAgICAgICAgICAuZ2V0KGRvY1JlZikKICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkb2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkb2MuZXhpc3RzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAnRG9jdW1lbnQgZG9lcyBub3QgZXhpc3QhJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHNjb3JlCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdQb2ludCA9IGRvYy5kYXRhKCkucG9pbnRzICsgcG9pbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShkb2NSZWYsIHsgcG9pbnRzOiBuZXdQb2ludCB9KTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9pbnRzIHVwZGF0ZWQhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdDb25ncmF0eiEgWW91IGVhcm5lZCAnICsgcG9pbnQgKyAncHRzIScpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUcmFuc2FjdGlvbiBmYWlsZWQ6ICcsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgcG9zdGVySW1hZ2UoaXRlbSkgewogICAgICAgICAgICBsZXQgYmFzZUltZ1VybCA9ICdodHRwczovL2ltYWdlLnRtZGIub3JnL3QvcC8nOwogICAgICAgICAgICByZXR1cm4gYmFzZUltZ1VybC5jb25jYXQoJ3cxNTQnLCBpdGVtLnBvc3Rlcl9wYXRoKTsKICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["Movie.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Movie.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-container v-if=\"loading\">\n        <div class=\"text-xs-center\">\n            <v-progress-circular\n                indeterminate\n                :size=\"150\"\n                :width=\"8\"\n                color=\"green\"\n            >\n            </v-progress-circular>\n        </div>\n    </v-container>\n\n    <v-container v-else>\n        <v-layout wrap>\n            <v-flex xs12 mr-1 ml-1>\n                <v-card>\n                    <v-img\n                        :src=\"posterImage(singleMovie)\"\n                        aspect-ratio=\"2\"\n                    ></v-img>\n                    <v-card-title primary-title>\n                        <div>\n                            <h2 class=\"headline mb-0\">\n                                {{ singleMovie.title }}\n                            </h2>\n                            <p>{{ singleMovie.release_date }}</p>\n                            <p>{{ singleMovie.overview }}</p>\n                            <h3>Runtime:</h3>\n                            {{ singleMovie.runtime }} minutes\n                            <h3>Genres:</h3>\n                            <ul\n                                v-for=\"(item, index) in movieGenres\"\n                                :key=\"index\"\n                            >\n                                <li>{{ item.name }}</li>\n                            </ul>\n                        </div>\n                    </v-card-title>\n                    <v-card-actions>\n                        <v-btn text color=\"green\" @click=\"back\">back</v-btn>\n                    </v-card-actions>\n                    <!--if the user logged in-->\n                    <div v-if=\"loggedIn\">\n                        <v-card-actions>\n                            <v-btn\n                                v-if=\"gottaWatched\"\n                                text\n                                color=\"green\"\n                                @click=\"removeGottaWatch\"\n                                >UnGottaWatch</v-btn\n                            >\n                            <v-btn\n                                v-else\n                                text\n                                color=\"green\"\n                                @click=\"addToGottaWatchList\"\n                                >GottaWatch</v-btn\n                            >\n                        </v-card-actions>\n                        <v-card-actions>\n                            <v-btn\n                                v-if=\"watched\"\n                                text\n                                color=\"green\"\n                                @click=\"removeWatched\"\n                                >UnWatched</v-btn\n                            >\n                            <v-btn\n                                v-else\n                                text\n                                color=\"green\"\n                                @click=\"addToWatchedList\"\n                                >Watched</v-btn\n                            >\n                        </v-card-actions>\n                    </div>\n                    <!--if the user did not log in-->\n                    <div v-else>\n                        <v-card-actions>\n                            <v-btn text color=\"green\">\n                                <!-- TODO: get tooltips to work -->\n                                <v-tooltip\n                                    light\n                                    content=\"Login to add this movie to your gotta watch list\"\n                                >\n                                    GottaWatch\n                                </v-tooltip>\n                            </v-btn>\n                        </v-card-actions>\n                        <v-card-actions>\n                            <v-btn text color=\"green\">\n                                <v-tooltip\n                                    light\n                                    content=\"Login to add this movie to your watched list\"\n                                >\n                                    Watched\n                                </v-tooltip>\n                            </v-btn>\n                        </v-card-actions>\n                    </div>\n                </v-card>\n            </v-flex>\n        </v-layout>\n    </v-container>\n</template>\n\n<script>\nimport movieApi from '@/MovieApi';\nimport { db } from '@/firebase';\nimport 'firebase/firestore';\nimport firebase from 'firebase/app';\n\nvar MovieList = function() {\n    return {\n        movie: null,\n        datetime: new Date(),\n        owner: '',\n        movieId: ''\n    };\n};\n\nexport default {\n    props: ['id'],\n\n    data() {\n        return {\n            user: this.$store.state.user.user,\n            singleMovie: '',\n            movieGenres: [],\n            gottaWatchList: [],\n            watchedList: [],\n            dialog: false,\n            loading: true,\n            ratings: ''\n        };\n    },\n    mounted() {\n        movieApi\n            .fetchSingleMovie(this.id)\n            .then(response => {\n                this.singleMovie = response;\n                this.ratings = this.singleMovie.vote_average;\n                this.movieGenres = this.singleMovie.genres;\n                this.loading = false;\n                this.fetchGottaWatchList();\n                this.fetchWatchedList();\n            })\n            .catch(error => {\n                // eslint-disable-next-line no-console\n                console.error('AJAX QUERY ERROR', error);\n            });\n    },\n\n    computed: {\n        loggedIn() {\n            return firebase.auth().currentUser != null;\n        },\n        loggedInListOwner() {\n            if (firebase.auth().currentUser) {\n                return this.gottaWatchList.find(function(list) {\n                    return list.owner === firebase.auth().currentUser.uid;\n                }, firebase.auth().currentUser);\n            }\n            return null;\n        },\n        isListOwner() {\n            if (this.loggedInListOwner) {\n                return true;\n            }\n\n            return false;\n        },\n        gottaWatched() {\n            return this.gottaWatchList.some(\n                movie => movie.movieId === this.singleMovie.id\n            );\n        },\n        watched() {\n            return this.watchedList.some(\n                movie => movie.movieId === this.singleMovie.id\n            );\n        }\n    },\n\n    methods: {\n        back() {\n            this.$router.push('/');\n        },\n\n        async fetchGottaWatchList() {\n            this.gottaWatchList = [];\n            var self = this;\n            // eslint-disable-next-line no-console\n            console.log(\n                this.gottaWatchList.some(\n                    movie => movie.movie.id === this.singleMovie.id\n                )\n            );\n            // eslint-disable-next-line no-console\n            console.log(this.gottaWatchList);\n            // load list from database to local\n            await db\n                .collection('popcornUsers')\n                .doc(this.user.uid)\n                .collection('gottaWatchList')\n                .orderBy('datetime')\n                .get()\n                .then(function(querySnapshot) {\n                    querySnapshot.forEach(function(doc) {\n                        // eslint-disable-next-line no-console\n                        self.gottaWatchList.push(doc.data());\n                    });\n                })\n                .catch(function(error) {\n                    // eslint-disable-next-line no-console\n                    console.log('Error getting documents: ', error);\n                });\n            // eslint-disable-next-line no-console\n            console.log(\n                self.gottaWatchList.some(\n                    movie => movie.movie.id === this.singleMovie.id\n                )\n            );\n            // eslint-disable-next-line no-console\n            console.log(self.gottaWatchList);\n        },\n\n        async fetchWatchedList() {\n            this.watchedList = [];\n            var self = this;\n            // load list from database to local\n            await db\n                .collection('popcornUsers')\n                .doc(this.user.uid)\n                .collection('watchedList')\n                .orderBy('datetime')\n                .get()\n                .then(function(querySnapshot) {\n                    querySnapshot.forEach(function(doc) {\n                        // eslint-disable-next-line no-console\n                        self.watchedList.push(doc.data());\n                    });\n                })\n                .catch(function(error) {\n                    // eslint-disable-next-line no-console\n                    console.log('Error getting documents: ', error);\n                });\n\n            // eslint-disable-next-line no-console\n            console.log(\n                this.watchedList.some(\n                    movie => movie.movie.id === this.singleMovie.id\n                )\n            );\n            // eslint-disable-next-line no-console\n            console.log(this.watchedList);\n        },\n\n        backToPopular() {\n            this.$router.push('/popular');\n        },\n\n        addToGottaWatchList() {\n            if (!this.gottaWatched) {\n                let gottaWatch = new MovieList();\n                gottaWatch.movie = this.singleMovie;\n                gottaWatch.owner = this.user.uid;\n                gottaWatch.movieId = this.singleMovie.id;\n                var self = this;\n                // add to sub collection\n                db.collection('popcornUsers')\n                    .doc(this.user.uid)\n                    .collection('gottaWatchList')\n                    .add(gottaWatch)\n                    .then(function() {\n                        alert('Added to Gotta Watch');\n                        self.backToPopular();\n                    })\n                    .catch(error => {\n                        alert('Failed to add');\n                        // eslint-disable-next-line no-console\n                        console.error('Failed to add movie', error);\n                    });\n\n                // add to the array\n                this.gottaWatchList.push(this.singleMovie);\n            }\n        },\n\n        removeGottaWatch() {\n            if (this.isListOwner) {\n                // eslint-disable-next-line no-console\n                console.log(this.singleMovie.id);\n                var self = this;\n                var deletequery = db\n                    .collection('popcornUsers')\n                    .doc(this.user.uid)\n                    .collection('gottaWatchList')\n                    .where('movieId', '==', this.singleMovie.id);\n                deletequery\n                    .get()\n                    .then(function(querySnapshot) {\n                        querySnapshot.forEach(function(doc) {\n                            doc.ref.delete();\n                            alert('UnGottaWatched!');\n                            self.backToPopular();\n                            self.addPoints(self.user.uid, 5);\n                            // eslint-disable-next-line no-console\n                            console.log('Deleted');\n                        });\n                    })\n                    .catch(function(error) {\n                        alert('Failed to UnGottaWatched');\n                        // eslint-disable-next-line no-console\n                        console.error('Failed: ', error);\n                    });\n            }\n        },\n\n        addToWatchedList() {\n            if (!this.watched) {\n                let watched = new MovieList();\n                watched.movie = this.singleMovie;\n                watched.owner = this.user.uid;\n                watched.movieId = this.singleMovie.id;\n                var self = this;\n                // add to sub collection\n                db.collection('popcornUsers')\n                    .doc(this.user.uid)\n                    .collection('watchedList')\n                    .add(watched)\n                    .then(function() {\n                        alert('Added to Watched');\n                        self.backToPopular();\n                        self.addPoints(self.user.uid, 10);\n                    })\n                    .catch(error => {\n                        alert('Failed to add');\n                        // eslint-disable-next-line no-console\n                        console.error('Failed to add movie', error);\n                    });\n\n                // add to the array\n                this.watchedList.push(this.singleMovie);\n            }\n        },\n\n        removeWatched() {\n            if (this.isListOwner) {\n                // eslint-disable-next-line no-console\n                console.log(this.singleMovie.id);\n                var self = this;\n                var deletequery = db\n                    .collection('popcornUsers')\n                    .doc(this.user.uid)\n                    .collection('watchedList')\n                    .where('movieId', '==', this.singleMovie.id);\n                deletequery\n                    .get()\n                    .then(function(querySnapshot) {\n                        querySnapshot.forEach(function(doc) {\n                            doc.ref.delete();\n                            alert('UnWatched!');\n                            self.backToPopular();\n                            // eslint-disable-next-line no-console\n                            console.log('Deleted');\n                        });\n                    })\n                    .catch(function(error) {\n                        alert('Failed to UnWatched');\n                        // eslint-disable-next-line no-console\n                        console.error('Failed: ', error);\n                    });\n            }\n        },\n\n        addPoints(userId, point) {\n            db.runTransaction(function(transaction) {\n                let docRef = db.collection('popcornBoard').doc(userId);\n\n                return transaction\n                    .get(docRef)\n                    .then(function(doc) {\n                        if (!doc.exists) {\n                            throw 'Document does not exist!';\n                        }\n\n                        // add score\n                        var newPoint = doc.data().points + point;\n                        transaction.update(docRef, { points: newPoint });\n                    })\n                    .then(function() {\n                        // eslint-disable-next-line no-console\n                        console.log('Points updated!');\n                        alert('Congratz! You earned ' + point + 'pts!');\n                    })\n                    .catch(function(error) {\n                        // eslint-disable-next-line no-console\n                        console.log('Transaction failed: ', error);\n                    });\n            });\n        },\n\n        posterImage(item) {\n            let baseImgUrl = 'https://image.tmdb.org/t/p/';\n            return baseImgUrl.concat('w154', item.poster_path);\n        }\n    }\n};\n</script>\n"]}]}